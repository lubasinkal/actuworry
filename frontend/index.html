

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actuworry</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="#" class="text-2xl font-bold text-indigo-600">Actuworry</a>
                <div class="hidden md:flex space-x-4">
                    <a href="#pricing" class="text-gray-600 hover:text-indigo-600">Pricing</a>
                    <a href="#reserving" class="text-gray-600 hover:text-indigo-600">Reserving</a>
                </div>
            </div>
        </div>
    </nav>

    <div id="pricing" class="container mx-auto p-4">
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold mb-4">Life Insurance Pricing</h2>
            <form id="pricing-form">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div>
                        <label for="age" class="block text-sm font-medium text-gray-700">Age</label>
                        <input type="number" id="age" name="age" min="18" max="80" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 35" required>
                    </div>
                    <div>
                        <label for="sum_assured" class="block text-sm font-medium text-gray-700">Sum Assured (BWP)</label>
                        <input type="number" id="sum_assured" name="sum_assured" min="10000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 100000" required>
                    </div>
                    <div>
                        <label for="product_type" class="block text-sm font-medium text-gray-700">Product Type</label>
                        <select id="product_type" name="product_type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" onchange="toggleProductFields()">
                            <option value="term_life">Term Life Insurance</option>
                            <option value="whole_life">Whole Life Insurance</option>
                            <option value="immediate_annuity">Immediate Annuity</option>
                            <option value="deferred_annuity">Deferred Annuity</option>
                        </select>
                    </div>
                    <div>
                        <label for="term" class="block text-sm font-medium text-gray-700" id="term_label">Term (years)</label>
                        <input type="number" id="term" name="term" min="1" max="40" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 10" required>
                        <p class="text-xs text-gray-500 mt-1" id="term_help">Coverage period for term life insurance</p>
                    </div>
                    <div>
                        <label for="interest_rate" class="block text-sm font-medium text-gray-700">Interest Rate (%)</label>
                        <input type="number" id="interest_rate" name="interest_rate" min="0" max="20" step="0.01" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 5.0" required>
                    </div>
                    <div>
                        <label for="table_name" class="block text-sm font-medium text-gray-700">Mortality Table</label>
                        <select id="table_name" name="table_name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <div id="deferral_field" class="hidden">
                        <label for="deferral_period" class="block text-sm font-medium text-gray-700">Deferral Period (years)</label>
                        <input type="number" id="deferral_period" name="deferral_period" min="1" max="40" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 10">
                        <p class="text-xs text-gray-500 mt-1">Years to wait before annuity payments begin</p>
                    </div>
                </div>
                
                <!-- Underwriting Section -->
                <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <h3 class="text-lg font-semibold mb-3 text-gray-800">Underwriting Factors (Optional)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="smoker_status" class="block text-sm font-medium text-gray-700">Smoker Status</label>
                            <select id="smoker_status" name="smoker_status" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                <option value="">Unknown/Standard</option>
                                <option value="non_smoker">Non-smoker</option>
                                <option value="smoker">Smoker</option>
                            </select>
                        </div>
                        <div>
                            <label for="health_rating" class="block text-sm font-medium text-gray-700">Health Rating</label>
                            <select id="health_rating" name="health_rating" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                <option value="">Standard</option>
                                <option value="preferred">Preferred</option>
                                <option value="substandard">Substandard</option>
                            </select>
                        </div>
                        <div>
                            <label for="rating_factor" class="block text-sm font-medium text-gray-700">Custom Rating Factor</label>
                            <input type="number" id="rating_factor" name="rating_factor" min="0.5" max="5" step="0.1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 1.0">
                            <p class="text-xs text-gray-500 mt-1">1.0 = standard risk, >1.0 = higher risk</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 flex space-x-4">
                    <button type="submit" class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Calculate Premiums</button>
                    <button type="button" id="sensitivity-btn" class="inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Sensitivity Analysis</button>
                    <button type="button" id="comparison-btn" class="inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Compare Policies</button>
                </div>
                </div>
            </form>
            <div id="premium-result" class="mt-8 hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="text-lg font-bold mb-2">Net Premium</h3>
                        <p class="text-2xl font-bold text-blue-600">BWP <span id="net-premium-value"></span></p>
                        <p class="text-sm text-gray-600 mt-1">Pure risk premium without expenses</p>
                        <p class="text-xs font-medium text-blue-700 mt-2">ðŸ’° Paid annually</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="text-lg font-bold mb-2">Gross Premium</h3>
                        <p class="text-2xl font-bold text-indigo-600">BWP <span id="gross-premium-value"></span></p>
                        <p class="text-sm text-gray-600 mt-1">Market premium including expenses & profit</p>
                        <p class="text-xs font-medium text-indigo-700 mt-2">ðŸ’° Paid annually</p>
                    </div>
                </div>
                <div id="expense-breakdown" class="mt-4 bg-yellow-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Expense Assumptions:</h4>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div>Initial Expenses: <span id="initial-expense"></span>% of sum assured</div>
                        <div>Renewal Expenses: <span id="renewal-expense"></span>% of gross premium</div>
                        <div>Maintenance: BWP <span id="maintenance-expense"></span> per year</div>
                        <div>Profit Margin: <span id="profit-margin"></span>%</div>
                    </div>
                </div>
                <div id="reserve-schedule" class="mt-6 bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold mb-3">Net Premium Reserve Schedule:</h4>
                    <div class="mb-4">
                        <canvas id="reserveChart" width="400" height="200"></canvas>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full text-sm">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-1">Year</th>
                                    <th class="text-right py-1">Reserve (BWP)</th>
                                </tr>
                            </thead>
                            <tbody id="reserve-table-body">
                                <!-- Reserve schedule will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="reserving" class="container mx-auto p-4 hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold mb-4">Chain Ladder Reserving</h2>
                <form id="chain-ladder-form">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label for="cl-claims-data" class="block text-sm font-medium text-gray-700">Claims Data (CSV format)</label>
                            <textarea id="cl-claims-data" name="claims_data" rows="5" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g.,\n100,150,200\n120,180\n150"></textarea>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button type="submit" class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Calculate Reserves</button>
                    </div>
                </form>
                <div id="chain-ladder-result" class="mt-8 hidden">
                    <h3 class="text-xl font-bold">Calculated Reserves</h3>
                    <p class="mt-2 text-2xl font-bold text-indigo-600">P <span id="cl-reserves-value"></span></p>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold mb-4">Bornhuetter-Ferguson Reserving</h2>
                <form id="bf-form">
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label for="bf-claims-data" class="block text-sm font-medium text-gray-700">Claims Data (CSV format)</label>
                            <textarea id="bf-claims-data" name="claims_data" rows="5" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g.,\n100,150,200\n120,180\n150"></textarea>
                        </div>
                        <div>
                            <label for="expected_loss_ratio" class="block text-sm font-medium text-gray-700">Expected Loss Ratio</label>
                            <input type="number" step="0.01" id="expected_loss_ratio" name="expected_loss_ratio" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 0.75">
                        </div>
                        <div>
                            <label for="premium" class="block text-sm font-medium text-gray-700">Premium (CSV format)</label>
                            <input type="text" id="premium" name="premium" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="e.g., 1000,1200,1500">
                        </div>
                    </div>
                    <div class="mt-4">
                        <button type="submit" class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Calculate Reserves</button>
                    </div>
                </form>
                <div id="bf-result" class="mt-8 hidden">
                    <h3 class="text-xl font-bold">Calculated Reserves</h3>
                    <p class="mt-2 text-2xl font-bold text-indigo-600">P <span id="bf-reserves-value"></span></p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/pricing.js"></script>
    <script src="js/reserving.js"></script>
    <script>
        function toggleProductFields() {
            const productType = document.getElementById('product_type').value;
            const termLabel = document.getElementById('term_label');
            const termHelp = document.getElementById('term_help');
            const termField = document.getElementById('term');
            const sumAssuredLabel = document.querySelector('label[for="sum_assured"]');
            const deferralField = document.getElementById('deferral_field');
            
            // Reset visibility
            deferralField.classList.add('hidden');
            
            switch(productType) {
                case 'whole_life':
                    termLabel.textContent = 'Premium Paying Period (years)';
                    termHelp.textContent = 'Number of years to pay premiums (coverage is for life)';
                    sumAssuredLabel.textContent = 'Coverage Amount (BWP)';
                    termField.required = true;
                    break;
                case 'immediate_annuity':
                    termLabel.textContent = 'Not Required';
                    termHelp.textContent = 'Annuity payments start immediately';
                    sumAssuredLabel.textContent = 'Annual Payout (BWP)';
                    termField.required = false;
                    termField.value = 0;
                    break;
                case 'deferred_annuity':
                    termLabel.textContent = 'Not Required';
                    termHelp.textContent = 'Annuity payments start after deferral period';
                    sumAssuredLabel.textContent = 'Annual Payout (BWP)';
                    deferralField.classList.remove('hidden');
                    termField.required = false;
                    termField.value = 0;
                    break;
                default: // term_life
                    termLabel.textContent = 'Term (years)';
                    termHelp.textContent = 'Coverage period for term life insurance';
                    sumAssuredLabel.textContent = 'Sum Assured (BWP)';
                    termField.required = true;
                    break;
            }
        }
    </script>
</body>
</html>
</html>